<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  

  <title>Building Your Own Modules - DO-MS</title>
  <link rel="stylesheet" href="http://localhost:4000/assets/css/just-the-docs.css">
    <link rel="shortcut icon" href="https://slavovlab.net/index_files/icons/Slavov-Laboratory.ico">

    <!--
    
      <script>
        window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
        ga('create', 'UA-4005755-3', 'http://localhost:4000');
        ga('send', 'pageview');
      </script>
      <script async src="https://www.google-analytics.com/analytics.js"></script>
    
    -->

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-4005755-5"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-4005755-5');
    </script>

  
    <script type="text/javascript" src="http://localhost:4000/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="http://localhost:4000/assets/js/just-the-docs.js"></script>
  <script type="text/javascript" src="http://localhost:4000/assets/js/vendor/MathJax.js"></script>
  <!--
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Building Your Own Modules | DO-MS</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="Building Your Own Modules" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="DO-MS Documentation Slavov Laboratory" />
<meta property="og:description" content="DO-MS Documentation Slavov Laboratory" />
<link rel="canonical" href="http://localhost:4000/docs/build-your-own" />
<meta property="og:url" content="http://localhost:4000/docs/build-your-own" />
<meta property="og:site_name" content="DO-MS" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Building Your Own Modules" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"DO-MS Documentation Slavov Laboratory","headline":"Building Your Own Modules","url":"http://localhost:4000/docs/build-your-own"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>

  <div class="page-wrap">
    <div class="side-bar">
      <a href="http://localhost:4000" class="site-title fs-6 lh-tight">DO-MS</a>
      <span class="fs-3"><button class="js-main-nav-trigger navigation-list-toggle btn btn-outline" type="button" data-text-toggle="Hide">Menu</button></span>
      <div class="navigation main-nav js-main-nav">
        <nav role="navigation" aria-label="Main navigation">
  <ul class="navigation-list">
    
    
      
    
      
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/" class="navigation-list-link">Home</a>
            
          </li>
        
      
    
      
        
      
    
      
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/docs/getting-started" class="navigation-list-link">Getting Started</a>
            
              
              <ul class="navigation-list-child-list ">
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/getting-started-application" class="navigation-list-link">Interactive Application</a>
                      
                    </li>
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/getting-started-command-line" class="navigation-list-link">Command Line</a>
                      
                    </li>
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/DO-MS_examples" class="navigation-list-link">DO-MS Examples</a>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
              </ul>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/docs/automation" class="navigation-list-link">Automating Report Generation</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item active">
            
            <a href="http://localhost:4000/docs/build-your-own" class="navigation-list-link active">Building Your Own Modules</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/docs/adding-folders" class="navigation-list-link">Adding Input Folders</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/docs/other-search-engines" class="navigation-list-link">Adding Search Engines</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/docs/hosting-as-server" class="navigation-list-link">Hosting as a Server</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/docs/session-info" class="navigation-list-link">Session Info</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/docs/known-issues" class="navigation-list-link">Known Issues</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/mass-spec/methods" class="navigation-list-link">Related methods</a>
            
          </li>
        
      
    
  </ul>
</nav>

      </div>
      <footer role="contentinfo" class="site-footer">
        <p class="text-small text-grey-dk-000 mb-0">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p>
      </footer>
    </div>
    <div class="main-content-wrap js-main-content" tabindex="0">
      <div class="page-header">
        <div class="main-content">
          
          <div class="search js-search">
            <div class="search-input-wrap">
              <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search DO-MS" aria-label="Search DO-MS" autocomplete="off">
              <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg>
            </div>
            <div class="js-search-results search-results-wrap"></div>
          </div>
          
          
            <ul class="list-style-none text-small mt-md-1 mb-md-1 pb-4 pb-md-0 js-aux-nav aux-nav">
              
                <li class="d-inline-block my-0 mr-2"><a href="https://www.biorxiv.org/content/10.1101/512152v1">DO-MS Preprint</a></li>
              
                <li class="d-inline-block my-0 mr-2"><a href="https://pubs.acs.org/doi/10.1021/acs.jproteome.9b00039">JPR Article</a></li>
              
                <li class="d-inline-block my-0 mr-2"><a href="https://github.com/SlavovLab/DO-MS">GitHub Repository</a></li>
              
                <li class="d-inline-block my-0"><a href="http://slavovlab.net">Slavov Lab</a></li>
              
            </ul>
          
        </div>
      </div>
      <div class="main-content">
        
          
        
        <div id="main-content" class="page-content" role="main">
          <h1 id="building-your-own-modules">Building your own modules</h1>

<p>DO-MS is designed to allow easy customization to in-house proteomics workflows through a modular plotting and data display system. Modules are a type of data display, such as plots, tables, and text.</p>

<p>Write your code once in the module format, apply it automatically to different datasets, and get consistent data display through the web interface or generated reports.</p>

<p><strong>Table of Contents</strong></p>

<ul>
  <li><a href="#tabs">Tabs</a>
    <ul>
      <li><a href="#tab-organization">Tab Organization</a></li>
      <li><a href="#removing-tabs">Removing Tabs</a></li>
    </ul>
  </li>
  <li><a href="#modules">Modules</a>
    <ul>
      <li><a href="#module-organization">Module Organization</a></li>
      <li><a href="#removing-modules">Removing Modules</a></li>
    </ul>
  </li>
  <li><a href="#module-types">Module Types</a>
    <ul>
      <li><a href="#plot">plot</a></li>
      <li><a href="#table">table</a></li>
      <li><a href="#datatable">datatable</a></li>
      <li><a href="#text">text</a></li>
    </ul>
  </li>
  <li><a href="#module-structure">Module Structure</a>
    <ul>
      <li><a href="#metadata-fields">Metadata Fields</a></li>
      <li><a href="#functions">Functions</a></li>
      <li><a href="#additional-options-web-interface">Additional Options (Web Interface)</a></li>
      <li><a href="#additional-options-plot-type">Additional Options (Plot Type)</a></li>
      <li><a href="#additional-options-datatable-type">Additional Options (Datatable Type)</a></li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="tabs">Tabs</h2>

<p>Modules are organized and grouped together through tabs, which are named folders under the <code class="highlighter-rouge">modules/</code> folder.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">ls </span>modules
005_Summary  
010_Chromatography  
020_Instrument_Performance  
...
</code></pre></div></div>

<h3 id="tab-organization">Tab Organization</h3>

<p>Tabs are sorted alphabetically, so numerical prefixes to folder names allow for custom ordering of tabs, as done with the base set of tabs. When displaying the tab name in the interface/report, numerical prefixes are removed and the <code class="highlighter-rouge">_</code> character is replaced with a space.</p>

<h3 id="removing-tabs">Removing Tabs</h3>

<p>Deleting the tab folder will remove the tab and all of its child modules. Tabs can be “commented out” by appending the folder name with two underscores, like so: <code class="highlighter-rouge">__090_Hidden_Tab/</code>.</p>

<hr />

<h2 id="modules">Modules</h2>

<p>Each module is its own <code class="highlighter-rouge">.R</code> file inside of a tab. The contents of the module are described below, and annotated, example modules can be found in the <code class="highlighter-rouge">examples/</code> folder. You can also use the base set of modules as a reference to build your own.</p>

<h3 id="module-organization">Module Organization</h3>

<p>Modules are displayed alphabetically in both the web interface and report. Numerical prefixes to the module file name allow for custom ordering, in the same system for tabs described above. Unlike tabs, module names are specified inside the file and are not derived from the file name.</p>

<h3 id="removing-modules">Removing Modules</h3>

<p>Deleting a module will remove it. If you want to keep it without displaying it, you can “comment out” similar to tabs, by appending the module file name with two underscores like so: <code class="highlighter-rouge">__hide_this_module.R</code></p>

<hr />

<h2 id="module-types">Module Types</h2>

<p>Modules can render into a variety of display types. Current options are listed below, but more are upcoming.</p>

<h3 id="plot"><code class="highlighter-rouge">plot</code></h3>

<p>Render a plot image. The plot function should return a <code class="highlighter-rouge">ggplot</code> object or a vanilla R plot object recorded with the <code class="highlighter-rouge">recordPlot()</code> function.</p>

<h3 id="table"><code class="highlighter-rouge">table</code></h3>

<p>Render a static table. The plot function should return a matrix or datatable</p>

<h3 id="datatable"><code class="highlighter-rouge">datatable</code></h3>

<p>The same as the <code class="highlighter-rouge">table</code> type, except in the web interface and HTML report this table is displayed as a <code class="highlighter-rouge">DataTable</code> which allows searching, reordering, etc. More details on DataTables can be found here <a href="https://datatables.net/reference/index">https://datatables.net/reference/index</a>.</p>

<h3 id="text"><code class="highlighter-rouge">text</code></h3>

<p>Render a string. The plot function should return a string. Newlines should be done with two newline characters (<code class="highlighter-rouge">\n\n</code>) instead of one for proper display.</p>

<hr />

<h2 id="module-structure">Module Structure</h2>

<p>Each module file specifies a function <code class="highlighter-rouge">init()</code> that takes in no arguments, and returns a list that provides both metadata about the module and function definitions that give the module its functionality.</p>

<h3 id="metadata-fields">Metadata Fields</h3>

<h5 id="type"><code class="highlighter-rouge">type</code></h5>

<p>Module type, as described above.</p>

<h5 id="box_title"><code class="highlighter-rouge">box_title</code></h5>

<p>The name of the module, as displayed on the web interface and report</p>

<h5 id="help_text"><code class="highlighter-rouge">help_text</code></h5>

<p>Description of the module, shown in the web interface and documentation tab</p>

<h5 id="source_file"><code class="highlighter-rouge">source_file</code></h5>

<p>Description of the file(s) used for this module, displayed in the documentation tab</p>

<h3 id="functions">Functions</h3>

<h5 id="validate_funcdata-input"><code class="highlighter-rouge">validate_func(data, input)</code></h5>

<p>Function to validate whether or not the data required for this module is loaded. All implementations use <code class="highlighter-rouge">shiny</code>’s <code class="highlighter-rouge">validate</code> function internally.</p>

<h5 id="plotdata_funcdata-input"><code class="highlighter-rouge">plotdata_func(data, input)</code></h5>

<p>Function to generate filtered and modified data to be used for display. Returns data, usually in tabular form. This is the data that will be given to the user when clicking the “Download Data” button in the interface</p>

<h5 id="plot_funcdata-input"><code class="highlighter-rouge">plot_func(data, input)</code></h5>

<p>Function to generate a display object (plot, table, text) from the <code class="highlighter-rouge">plotdata</code> function.</p>

<h3 id="additional-options-web-interface">Additional Options (web interface)</h3>

<h5 id="box_width"><code class="highlighter-rouge">box_width</code></h5>

<p>Width of the box in bootstrap column units (1-12, where 12 is the full page width).</p>

<h5 id="box_height"><code class="highlighter-rouge">box_height</code></h5>

<p>Height of the box in pixels. By default the box height is the height of the plot object, or 400px if the display type is not a plot.</p>

<h3 id="additional-options-plot-type">Additional Options (plot type)</h3>

<h5 id="dynamic_width"><code class="highlighter-rouge">dynamic_width</code></h5>

<p>Value, in pixels, of the width of each experiment in the plot. For plots such as the vertical histograms used in the base set of DO-MS plots need to scale horizontally with the number of experiments.</p>

<h5 id="dynamic_width_base"><code class="highlighter-rouge">dynamic_width_base</code></h5>

<p>Value, in pixels, of the base width of a plot using the dynamic width. Useful for plots with elements taking up a fixed amount of horizontal space – e.g., legends.</p>

<h5 id="plot_height"><code class="highlighter-rouge">plot_height</code></h5>

<p>Height, in pixels, of the plot. Default is 370px. Will also scale the box height, unless it is also user-defined.</p>

<h5 id="report_plot_width"><code class="highlighter-rouge">report_plot_width</code></h5>

<p>Width, in inches, of the plot in the generated report. Defaults to a global report plot width, which is by default 5 inches.</p>

<h5 id="report_plot_height"><code class="highlighter-rouge">report_plot_height</code></h5>

<p>Height, in inches, of the plot in the generated report. Defaults to a global report plot height, which is by default 5 inches.</p>

<h3 id="additional-options-datatable-type">Additional Options (datatable type)</h3>

<h5 id="datatable_options"><code class="highlighter-rouge">datatable_options</code></h5>

<p>A list of parameters to pass to DataTables. For example:</p>

<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">datatable_options</span><span class="o">=</span><span class="nf">list</span><span class="p">(</span><span class="w">
  </span><span class="n">pageLength</span><span class="o">=</span><span class="m">10</span><span class="p">,</span><span class="w">
  </span><span class="n">dom</span><span class="o">=</span><span class="s1">'lfptp'</span><span class="p">,</span><span class="w">
  </span><span class="n">lengthMenu</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">15</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="m">50</span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>More details can be found in the R <code class="highlighter-rouge">DT</code> interface, <a href="https://rstudio.github.io/DT/">https://rstudio.github.io/DT/</a> and on the DataTables reference page <a href="https://datatables.net/reference/option/">https://datatables.net/reference/option/</a>.</p>



          
        </div>
      </div>
    </div>
  </div>

</body>
</html>
